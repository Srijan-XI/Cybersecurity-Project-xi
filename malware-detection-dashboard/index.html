<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malware Detection & Classification System</title>
    <link rel="stylesheet" href="frontend/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-shield-alt logo-icon"></i>
                    <h1 class="system-title">Malware Detection & Classification System</h1>
                </div>
                <div class="status-indicator">
                    <div class="status-dot online"></div>
                    <span class="status-text">System Online</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="navigation">
            <button class="nav-tab active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </button>
            <button class="nav-tab" data-tab="file-analysis">
                <i class="fas fa-file-medical"></i>
                File Analysis
            </button>
            <button class="nav-tab" data-tab="batch-analysis">
                <i class="fas fa-layer-group"></i>
                Batch Analysis
            </button>
            <button class="nav-tab" data-tab="reports">
                <i class="fas fa-chart-line"></i>
                Reports
            </button>
            <button class="nav-tab" data-tab="system-status">
                <i class="fas fa-cogs"></i>
                System Status
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon files">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Files Analyzed Today</h3>
                            <p class="stat-value">247</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon malware">
                            <i class="fas fa-virus"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Malware Detected</h3>
                            <p class="stat-value">18</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon uptime">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>System Uptime</h3>
                            <p class="stat-value">7d 14h 23m</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon accuracy">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Detection Accuracy</h3>
                            <p class="stat-value">98.7%</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="activity-panel">
                        <h3><i class="fas fa-history"></i> Recent Activity</h3>
                        <div class="activity-feed" id="activity-feed">
                            <!-- Activity items will be populated by JS -->
                        </div>
                    </div>
                    
                    <div class="chart-panel">
                        <h3><i class="fas fa-chart-pie"></i> Threat Distribution</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="threatChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="timeline-panel">
                        <h3><i class="fas fa-chart-area"></i> Analysis Timeline</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="timelineChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- File Analysis Tab -->
            <div id="file-analysis" class="tab-content">
                <div class="analysis-container">
                    <div class="upload-section">
                        <div class="file-upload" id="fileUpload">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <p>Drag & drop file here or <span class="browse-text">browse</span></p>
                            <input type="file" id="fileInput" hidden>
                        </div>
                        
                        <div class="analysis-options">
                            <h4>Analysis Options</h4>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="sandboxAnalysis" checked>
                                <span>Include sandbox analysis</span>
                            </label>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="deepLearning" checked>
                                <span>Use deep learning model</span>
                            </label>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="detailedReport">
                                <span>Generate detailed report</span>
                            </label>
                            
                            <div class="model-selection">
                                <label>ML Model:</label>
                                <select id="modelSelect" class="form-control">
                                    <option value="random-forest">Random Forest</option>
                                    <option value="svm">SVM</option>
                                    <option value="gradient-boost">Gradient Boosting</option>
                                    <option value="cnn">CNN Deep Learning</option>
                                </select>
                            </div>
                            
                            <button class="btn btn--primary analysis-btn" id="startAnalysis" disabled>
                                <i class="fas fa-play"></i>
                                Start Analysis
                            </button>
                        </div>
                    </div>

                    <div class="results-section" id="resultsSection" style="display: none;">
                        <div class="analysis-progress" id="analysisProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p class="progress-text" id="progressText">Analyzing file...</p>
                        </div>

                        <div class="analysis-results" id="analysisResults" style="display: none;">
                            <div class="file-info">
                                <h4><i class="fas fa-info-circle"></i> File Information</h4>
                                <div class="info-grid" id="fileInfo"></div>
                            </div>
                            
                            <div class="verdict-section">
                                <h4><i class="fas fa-gavel"></i> Analysis Verdict</h4>
                                <div class="verdict-card" id="verdictCard"></div>
                            </div>
                            
                            <div class="iocs-section">
                                <h4><i class="fas fa-exclamation-triangle"></i> Indicators of Compromise</h4>
                                <ul class="iocs-list" id="iocsList"></ul>
                            </div>
                            
                            <div class="recommendations-section">
                                <h4><i class="fas fa-lightbulb"></i> Security Recommendations</h4>
                                <ul class="recommendations-list" id="recommendationsList"></ul>
                            </div>
                            
                            <div class="feature-importance">
                                <h4><i class="fas fa-chart-bar"></i> Feature Importance</h4>
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <canvas id="featureChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Batch Analysis Tab -->
            <div id="batch-analysis" class="tab-content">
                <div class="batch-container">
                    <div class="batch-upload">
                        <div class="file-upload batch" id="batchUpload">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <p>Drag & drop multiple files here or <span class="browse-text">browse</span></p>
                            <input type="file" id="batchFileInput" multiple hidden>
                        </div>
                        <button class="btn btn--primary" id="startBatchAnalysis" disabled>
                            <i class="fas fa-play"></i>
                            Start Batch Analysis
                        </button>
                    </div>
                    
                    <div class="batch-progress" id="batchProgress" style="display: none;">
                        <div class="progress-header">
                            <h4>Processing Files</h4>
                            <span id="batchProgressText">0 / 0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="batchProgressFill"></div>
                        </div>
                    </div>
                    
                    <div class="batch-results" id="batchResults" style="display: none;">
                        <div class="results-header">
                            <h4>Batch Analysis Results</h4>
                            <div class="results-actions">
                                <button class="btn btn--secondary" id="exportCsv">
                                    <i class="fas fa-download"></i>
                                    Export CSV
                                </button>
                                <button class="btn btn--secondary" id="exportJson">
                                    <i class="fas fa-download"></i>
                                    Export JSON
                                </button>
                            </div>
                        </div>
                        
                        <div class="summary-stats" id="summaryStats"></div>
                        
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Filename</th>
                                        <th>Size</th>
                                        <th>Verdict</th>
                                        <th>Confidence</th>
                                        <th>Threat Level</th>
                                        <th>Analysis Time</th>
                                    </tr>
                                </thead>
                                <tbody id="batchTableBody">
                                    <!-- Results will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
                <div class="reports-container">
                    <div class="reports-header">
                        <h3>Analysis Reports</h3>
                        <div class="filter-controls">
                            <input type="date" id="dateFrom" class="form-control">
                            <input type="date" id="dateTo" class="form-control">
                            <select id="verdictFilter" class="form-control">
                                <option value="">All Verdicts</option>
                                <option value="malware">Malware</option>
                                <option value="benign">Benign</option>
                                <option value="suspicious">Suspicious</option>
                            </select>
                            <button class="btn btn--secondary" id="applyFilters">Apply Filters</button>
                        </div>
                    </div>
                    
                    <div class="reports-table-container">
                        <table class="reports-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Filename</th>
                                    <th>Verdict</th>
                                    <th>Confidence</th>
                                    <th>Model Used</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="reportsTableBody">
                                <!-- Reports will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- System Status Tab -->
            <div id="system-status" class="tab-content">
                <div class="status-container">
                    <div class="components-section">
                        <h3><i class="fas fa-server"></i> System Components</h3>
                        <div class="components-grid" id="componentsGrid">
                            <!-- Components will be populated here -->
                        </div>
                    </div>
                    
                    <div class="models-section">
                        <h3><i class="fas fa-brain"></i> ML Model Status</h3>
                        <div class="models-grid" id="modelsGrid">
                            <!-- Models will be populated here -->
                        </div>
                    </div>
                    
                    <div class="metrics-section">
                        <h3><i class="fas fa-chart-line"></i> System Metrics</h3>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <h4>CPU Usage</h4>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: 34%"></div>
                                </div>
                                <span>34%</span>
                            </div>
                            <div class="metric-card">
                                <h4>Memory Usage</h4>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: 67%"></div>
                                </div>
                                <span>67%</span>
                            </div>
                            <div class="metric-card">
                                <h4>Storage Usage</h4>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: 23%"></div>
                                </div>
                                <span>23%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Notification -->
        <div class="notification" id="notification" style="display: none;">
            <div class="notification-content">
                <i class="notification-icon"></i>
                <span class="notification-message"></span>
            </div>
        </div>
    </div>

    <script src="frontend/app.js"></script>
</body>
</html>